var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,s){function o(t){try{h(r.next(t))}catch(e){s(e)}}function a(t){try{h(r["throw"](t))}catch(e){s(e)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(o,a)}h((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,s&&(o=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(r){i=[6,r],s=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,s,o,a,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},BaseScene=function(t){function e(){var e=t.call(this)||this;return e.dataVo=new DataVO,e.isShow=!1,e.timeItem=null,e.scoreItem=null,e}return __extends(e,t),e.prototype.enter=function(){this.isShow||(this.isShow=!0,Game.instance().addBottom(this))},e.prototype.exit=function(){this.isShow=!1,this.parent&&this.parent.removeChild(this)},e}(egret.DisplayObjectContainer);__reflect(BaseScene.prototype,"BaseScene");var BaseView=function(t){function e(){var e=t.call(this)||this;return e.isOpen=!1,e}return __extends(e,t),e.prototype.open=function(){this.isOpen||(this.isOpen=!0,Game.instance().addTop(this))},e.prototype.close=function(){this.isOpen=!1,this.parent&&this.parent.removeChild(this)},e}(egret.Sprite);__reflect(BaseView.prototype,"BaseView");var Scene_001=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.dataVo.sData="鼠鹅牛猫虎驴兔鸭龙鱼蛇龟马鸟羊象猴蛙鸡熊狗狼猪凤",this.dataVo.tData="鼠牛虎兔龙蛇马羊猴鸡狗猪",this.dataVo.time=60,this.selectedArr=[];var t=SpriteUtil.createRect(SpriteUtil.stageWidth,SpriteUtil.stageHeight/8,13487553);t.x=SpriteUtil.stageWidth/2,t.y=SpriteUtil.stageHeight-t.height/2,t.touchEnabled=!0,this.bounds={width:SpriteUtil.stageWidth-60,height:SpriteUtil.stageHeight-SpriteUtil.stageHeight/8-60};for(var e=0;e<this.dataVo.sData.length;e++)this.createText(this.dataVo.sData.charAt(e));this.addChild(t),this.tarText=new egret.TextField,this.tarText.name="target_text",this.tarText.textAlign="center",this.tarText.text="",this.tarText.size=36,this.tarText.textColor=255,this.tarText.stroke=1,this.tarText.strokeColor=16776960,this.tarText.bold=!0,this.tarText.width=SpriteUtil.stageWidth,this.tarText.y=t.y-30,this.addChild(this.tarText),this.tarText.touchEnabled=!0,this.tarText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.textClk,this),this.timeItem=new TimeItem(this.dataVo.time),this.addChild(this.timeItem)},e.prototype.textClk=function(t){var e=this,i=t.target;if(this.tarText==i){i=this.selectedArr.pop();var r=200+320*Math.random(),n=SpriteUtil.stageHeight/2-100,s=this.tarText.text;this.tarText.text=s.substr(0,s.length-1),egret.Tween.get(i).to({x:r,y:n},500,egret.Ease.quadOut).call(function(){egret.Tween.removeTweens(i),e.back(i)})}else i.touchEnabled=!1,this.tarText.touchEnabled=!1,egret.Tween.removeTweens(i),egret.Tween.get(i).to({x:this.tarText.x+this.tarText.width/2,y:this.tarText.y,rotation:0},500).call(function(){egret.Tween.removeTweens(i);var t=""+e.tarText.text+i.text;e.tarText.text=t,i.touchEnabled=!0,e.tarText.touchEnabled=!0,e.selectedArr.push(i),t==e.dataVo.tData&&(e.timeItem.leftTime>=30?EffectUtil.showResultEffect(EffectUtil.PERFECT):e.timeItem.leftTime>=15?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),e.timeItem.stop())})},e.prototype.createText=function(t){var e=new egret.TextField;e.size=48,e.text=t,e.textColor=16777215*(8*Math.random()+2)/10,e.stroke=.5,e.strokeColor=16776960,e.bold=!0,e.x=this.bounds.width*Math.random(),e.y=this.bounds.height*Math.random(),this.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.textClk,this),this.back(e)},e.prototype.back=function(t){var e=this;egret.Tween.get(t).to({x:this.bounds.width*Math.random(),y:this.bounds.height*Math.random(),rotation:360*Math.random()},5e3+2e3*Math.random()).call(function(){e.back(t)})},e.prototype.enter=function(){t.prototype.enter.call(this),this.timeItem.start()},e.prototype.exit=function(){for(;this.numChildren>1;){var e=this.getChildAt(this.numChildren-1);e instanceof egret.TextField&&e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.textClk,this),egret.Tween.removeTweens(e),this.removeChild(e)}this.timeItem.stop(),t.prototype.exit.call(this)},e}(BaseScene);__reflect(Scene_001.prototype,"Scene_001");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){var t=new egret.Shape;t.graphics.beginFill(1118481),t.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),t.graphics.endFill(),this.stage.addChild(t),Game.instance().setStage(this.stage)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var EventCenter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.instance=function(){return null==this._instance&&(this._instance=new e),this._instance},e}(egret.EventDispatcher);__reflect(EventCenter.prototype,"EventCenter");var GameData=function(){function t(){}return t.currentLevel=0,t.config=[{title:"神秘的诅咒"},{title:"十二生肖",desc:"在有限时间内尽可能找出十二生肖所对应的文字，注意错误的排序会导致错误的结果！"},{title:"简单连连看",desc:"之所以简单是因为他不需要考虑路径的问题，快动手试试吧！"},{title:"拯救女友",desc:"你爱你的女友吗？好吧！让我见识见识你的勇气！"},{title:"装有玫瑰的礼盒",desc:"你本打算七夕送给你女友的玫瑰被人给动手脚了，那么问题来了，你能找到你的玫瑰吗？"},{title:"猴子爱吃水果",desc:"猴子喜欢吃水果，不爱吃的东西可是会杀掉它的，所以保持警惕，尽量躲避外来的入侵！"},{title:"大学与三尺冰",desc:"给你两个由不同碎片组成的图形，给你30秒的记忆时间，那么你能在接下来的16张图中找出这两张吗？"},{title:"小白鼠实验",desc:"不知道在有限时间内你能抓到多少只小白鼠！"},{title:"超强记忆",desc:"动物也是有情绪的，所以你要记住每一个动物的表情，为你以后做打算！"},{title:"篮球的逻辑",desc:"做个实验吧！这里有10个篮球，其中有一个较重一个较轻，其他重量都一样，想办法找到他们！"}],t}();__reflect(GameData.prototype,"GameData");var GameScene=function(){function t(){this.init()}return t.prototype.init=function(){this._menuScene=new MenuScene,this._overScene=new OverScene,this.allScenes=[0,Scene_001,Scene_002,Scene_003,Scene_004,Scene_005,Scene_006,Scene_007,Scene_008,Scene_009],this.addEvent()},t.prototype.addEvent=function(){EventCenter.instance().addEventListener(GameEvent.START_GAME,this.startGame,this),EventCenter.instance().addEventListener(GameEvent.GOTO_NEXT,this.gotoNext,this)},t.prototype.gotoMenu=function(){this._currentScene&&this._currentScene.exit(),this._overScene.exit(),this._menuScene.enter()},t.prototype.gotoOver=function(){this._currentScene&&this._currentScene.exit(),GameData.currentLevel=0,this._menuScene.exit(),this._overScene.enter()},t.prototype.gotoNext=function(t){void 0===t&&(t=null);var e=GameData.currentLevel;e++,GameData.currentLevel=e;var i=GameData.config[GameData.currentLevel].title+"\n"+GameData.config[GameData.currentLevel].desc;Game.instance().gameView.guideView.show(i),this._menuScene.exit(),this._overScene.exit(),this._currentScene&&this._currentScene.exit()},t.prototype.startGame=function(t){void 0===t&&(t=null),this._currentScene=new this.allScenes[GameData.currentLevel],this._currentScene.enter()},t}();__reflect(GameScene.prototype,"GameScene");var GameView=function(){function t(){this.init()}return t.prototype.init=function(){this._guideView=new GuideView},Object.defineProperty(t.prototype,"guideView",{get:function(){return this._guideView},enumerable:!0,configurable:!0}),t}();__reflect(GameView.prototype,"GameView");var GameEvent=function(t){function e(e,i,r,n){var s=t.call(this,e,i,r,n)||this;return s.data=null,s}return __extends(e,t),e.START_GAME="game_start",e.GOTO_NEXT="goto_next",e}(egret.Event);__reflect(GameEvent.prototype,"GameEvent");var ScoreItem=function(t){function e(){var e=t.call(this)||this;return e.score=0,e.tarScore=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.scoreTxt=new egret.TextField,this.scoreTxt.size=32,this.scoreTxt.text="0",this.scoreTxt.textColor=65280,this.scoreTxt.width=300,this.addChild(this.scoreTxt),this.y=10},e.prototype.setSTScore=function(t,e){this.score=t,e&&(this.tarScore=e),this.scoreTxt.text="分数 "+this.score+"  目标 "+this.tarScore},e.prototype.setScore=function(t){this.score=t,this.scoreTxt.text="分数 "+t},e.prototype.isCanPass=function(){return this.score>=this.tarScore?!0:!1},e}(egret.Sprite);__reflect(ScoreItem.prototype,"ScoreItem");var TimeItem=function(t){function e(e){void 0===e&&(e=0);var i=t.call(this)||this;return i._leftTime=0,i.callBackContext=null,i._leftTime=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.timeTxt=new egret.TextField,this.timeTxt.width=240,this.timeTxt.size=32,this.timeTxt.textColor=16711680,this.timeTxt.text="剩余时间  "+CommonUtil.getMSTimeBySeconds(this._leftTime),this.y=10,this.x=(SpriteUtil.stageWidth-200)/2,this.addChild(this.timeTxt)},e.prototype.start=function(t,e){void 0===e&&(e=null),this.timer=new egret.Timer(1e3),this.loop=t,this.callBackContext=e,this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerTick,this),this.timer.start()},e.prototype.restart=function(t,e,i){void 0===t&&(t=0),void 0===i&&(i=null),this._leftTime=t,this.timeTxt.text="剩余时间  "+CommonUtil.getMSTimeBySeconds(this._leftTime),this.timer=new egret.Timer(1e3),this.loop=e,this.callBackContext=i,this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerTick,this),this.timer.start()},Object.defineProperty(e.prototype,"leftTime",{get:function(){return this._leftTime},enumerable:!0,configurable:!0}),e.prototype.timerTick=function(){this._leftTime--,this.timeTxt.text="剩余时间  "+CommonUtil.getMSTimeBySeconds(this._leftTime),this.loop&&this.loop.call(this.callBackContext,this._leftTime),this._leftTime<=0&&(this.loop||EffectUtil.showResultEffect(),this.stop())},e.prototype.stop=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerTick,this),this.timer=null),this.loop=null,this.callBackContext=null},e}(egret.Sprite);__reflect(TimeItem.prototype,"TimeItem");var EgretRender=function(){function t(){}return t.create=function(e){var i={controller:t,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222222",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},r=Matter.Common.extend(i,e);return r.mouse=e.mouse,r.engine=e.engine,r.container=r.container||egret.MainContext.instance.stage,r.bounds=r.bounds||{min:{x:0,y:0},max:{x:r.width,y:r.height}},r},t.run=function(e){egret.startTick(function(i){return t.world(e),!1},t)},t.stop=function(e){void 0===e&&(e=null),egret.stopTick(function(t){return e&&e(),!1},t)},t.world=function(e){var i=e.engine,r=i.world,n=(e.renderer,e.container),s=e.options,o=Matter.Composite.allBodies(r),a=Matter.Composite.allConstraints(r),h=[],l=e.bounds.max.x-e.bounds.min.x,c=e.bounds.max.y-e.bounds.min.y,d=l/e.options.width,p=c/e.options.height;if(s.hasBounds){for(var u=0;u<o.length;u++){var g=o[u];g.render.sprite.visible=Matter.Bounds.overlaps(g.bounds,e.bounds)}for(var f=0;f<a.length;f++){var m=a[f],v=m.bodyA,y=m.bodyB,S=m.pointA,E=m.pointB;v&&(S=Matter.Vector.add(v.position,m.pointA,null)),y&&(E=Matter.Vector.add(y.position,m.pointB,null)),S&&E&&(Matter.Bounds.contains(e.bounds,S)||Matter.Bounds.contains(e.bounds,E))&&h.push(m)}n.scaleX=1/d,n.scaleY=1/p,n.x=-e.bounds.min.x*(1/d),n.y=-e.bounds.min.y*(1/p)}else h=a;for(u=0;u<o.length;u++)t.body(e,o[u]);for(u=0;u<h.length;u++)t.constraint(e,h[u])},t.body=function(e,i){var r=(e.engine,i.render);if(r.visible)if(r.sprite instanceof egret.DisplayObject){var n=("b-"+i.id,i.egretSprite),s=e.container;n||(n=i.egretSprite=i.render.sprite),s.contains(n)||s.addChild(n),n.x=i.position.x,n.y=i.position.y,n.rotation=180*i.angle/Math.PI}else{var n=("b-"+i.id,i.egretSprite),s=e.container;n&&s.removeChild(n),n=i.egretSprite=t._createBodyPrimitive(e,i),n.initAngle=i.angle,s.contains(n)||s.addChild(n),n.x=i.position.x,n.y=i.position.y,n.rotation=180*(i.angle-n.initAngle)/Math.PI}},t._createBodyPrimitive=function(t,e){var i,r,n,s,o=e.render,a=t.options,h=new MatterSprite,l=[],c=h.graphics;c.clear();for(var d=e.parts.length>1?1:0;d<e.parts.length;d++){s=e.parts[d],a.wireframes?(i="transparent",r=16711680,n=1):(i=o.fillStyle,r=o.strokeStyle,n=o.lineWidth);for(var p=0;p<s.vertices.length;p++)l.push([s.vertices[p].x-e.position.x,s.vertices[p].y-e.position.y]);c.beginFill(i),c.lineStyle(n,r),c.moveTo(l[0][0],l[0][1]);for(var u=1;u<l.length;u++)c.lineTo(l[u][0],l[u][1]);c.lineTo(l[0][0],l[0][1]),c.endFill()}return h},t.constraint=function(t,e){var i=(t.engine,e.bodyA),r=e.bodyB,n=e.pointA,s=e.pointB,o=t.container,a=e.render,h=("c-"+e.id,e.egretSprite);h||(h=e.egretSprite=new MatterSprite);var l=h.graphics;if(!a.visible||!e.pointA||!e.pointB)return void l.clear();o.contains(h)||o.addChild(h),l.clear();var c,d,p,u;i?(c=i.position.x+n.x,d=i.position.y+n.y):(c=n.x,d=n.y),r?(p=r.position.x+s.x,u=r.position.y+s.y):(p=s.x,u=s.y);var g=65280;l.lineStyle(1,g),l.moveTo(c,d),l.lineTo(p,u),l.endFill()},t}();__reflect(EgretRender.prototype,"EgretRender");var MatterSprite=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(egret.Sprite);__reflect(MatterSprite.prototype,"MatterSprite");var MenuScene=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createButton("开始");t.x=SpriteUtil.stageCenterX-t.width/2,t.y=SpriteUtil.stageCenterY,this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_NEXT))},this)},e}(BaseScene);__reflect(MenuScene.prototype,"MenuScene");var OverScene=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=new egret.TextField;t.name="target_text",t.textAlign="center",t.text="Game\nOver",t.size=120,t.textColor=13619151,t.stroke=1,t.strokeColor=16777215,t.bold=!0,t.width=SpriteUtil.stageWidth,t.y=SpriteUtil.stageHeight/2-200,this.addChild(t);var e=SpriteUtil.createButton("回主页");e.x=SpriteUtil.stageCenterX-e.width/2,e.y=SpriteUtil.stageCenterY+100,this.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Game.instance().gameScene.gotoMenu()},this)},e}(BaseScene);__reflect(OverScene.prototype,"OverScene");var Game=function(){function t(){}return t.instance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.setStage=function(t){this._gameStage=t,SpriteUtil.stageWidth=t.stageWidth,SpriteUtil.stageHeight=t.stageHeight,SpriteUtil.stageCenterX=t.stageWidth/2,SpriteUtil.stageCenterY=t.stageHeight/2,this._bottom=new egret.DisplayObjectContainer,this._middle=new egret.DisplayObjectContainer,this._top=new egret.DisplayObjectContainer,this._gameStage.addChild(this._bottom),this._gameStage.addChild(this._middle),this._gameStage.addChild(this._top),this._gameScene=new GameScene,this._gameView=new GameView,this._gameScene.gotoMenu()},t.prototype.addBottom=function(t){this._bottom.addChild(t)},t.prototype.addMiddle=function(t){this._middle.addChild(t)},t.prototype.addTop=function(t){this._top.addChild(t)},Object.defineProperty(t.prototype,"gameStage",{get:function(){return this._gameStage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameScene",{get:function(){return this._gameScene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameView",{get:function(){return this._gameView},enumerable:!0,configurable:!0}),t._instance=null,t}();__reflect(Game.prototype,"Game");var Scene_002=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.dataVo.sData="✍✉☎☀☻✌♈✿✪❈❦㊣☝☯➽❤▦卐❂☬☣※☂⊗◍✠♝♞㉿➽♬☑웃유❖☃☊큐☠Ю✍✉☎☀☻✌♈✿✪❈❦㊣☝☯➽❤▦卐❂☬☣※☂⊗◍✠♝♞㉿➽♬☑웃유❖☃☊큐☠Ю",this.dataVo.time=90;var t=this.dataVo.sData.split("");t.sort(function(t,e){return Math.random()>.5?1:Math.random()<.5?-1:0}),this.group=new egret.Sprite,this.group.x=5,this.group.y=200;for(var e=t.length,i=0;e>i;i++){var r=this.createText(t[i]);r.x=90*(i%8),r.y=86*Math.floor(i/8),this.group.addChild(r)}this.addChild(this.group),this.timeItem=new TimeItem(this.dataVo.time),this.addChild(this.timeItem)},e.prototype.textClk=function(t){this.currentSelect?this.currentSelect==t.target?(this.currentSelect.alpha=1,this.currentSelect=null):this.currentSelect.text==t.target.text?(this.group.removeChild(this.currentSelect),this.group.removeChild(t.target),this.currentSelect=null):(this.currentSelect.alpha=1,this.currentSelect=t.target,this.currentSelect.alpha=.5):(this.currentSelect=t.target,this.currentSelect.alpha=.5),this.group.numChildren<=0&&(this.timeItem.leftTime>=60?EffectUtil.showResultEffect(EffectUtil.PERFECT):this.timeItem.leftTime>=30?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),this.timeItem.stop())},e.prototype.createText=function(t){var e=new egret.TextField;return e.size=60,e.text=t,e.textColor=255,e.stroke=.5,e.strokeColor=0,e.width=80,e.height=80,e.background=!0,e.backgroundColor=16776960,e.textAlign="center",e.verticalAlign="middle",e.bold=!0,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.textClk,this),e},e.prototype.enter=function(){t.prototype.enter.call(this),this.timeItem.start()},e.prototype.exit=function(){for(t.prototype.exit.call(this);this.numChildren>1;){var e=this.getChildAt(this.numChildren-1);e instanceof egret.TextField&&e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.textClk,this),this.removeChild(e)}},e}(BaseScene);__reflect(Scene_002.prototype,"Scene_002");var Scene_003=function(t){function e(){var e=t.call(this)||this;return e.angleSpeed1=.05,e.angleSpeed2=.06,e.angleSpeed3=.065,e.angleSpeed4=.08,e.speedDir=1,e.isTouching=!1,e.categories=[1,2,4,8,16,32,64,128],e.playerCategory=256,e.isRunning=!0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this;this.timeItem=new TimeItem(60),this.timeItem.x=SpriteUtil.stageWidth-250,this.addChild(this.timeItem),this.engine=Matter.Engine.create({enableSleeping:!1},null);var e=this.engine.world;this.runner=Matter.Runner.create(null),this.runner.isFixed=!0;var i=EgretRender.create({engine:this.engine,container:this,options:{width:SpriteUtil.stageWidth,height:SpriteUtil.stageHeight,wireframes:!0}});e.gravity.y=0,Matter.Runner.run(this.runner,this.engine),EgretRender.run(i);var r=this.createEnemy(0,560,this.categories[1]);Matter.World.add(e,r);var n=this.createEnemy(200,560,this.categories[2]);Matter.World.add(e,n);var s=this.createEnemy(400,560,this.categories[3]);Matter.World.add(e,s);var o=this.createEnemy(580,560,this.categories[4]);Matter.World.add(e,o);var a=this.createEnemy(0,860,this.categories[5],15);Matter.World.add(e,a);var h=this.createEnemy(400,860,this.categories[5],15);Matter.World.add(e,h);var l=this.createEnemy(210,1100,this.categories[5],15);Matter.World.add(e,l);var c=this.createEnemy(160,100,this.categories[5]);Matter.World.add(e,c);var d=this.createEnemy(310,200,this.categories[5]);Matter.World.add(e,d);var p=this.createEnemy(460,100,this.categories[5]);Matter.World.add(e,p),this.enemies=[r,n,s,o,a,h,l,c,d,p];var u=SpriteUtil.createText("🐙",50,16711680),g=Matter.Bodies.circle(100,300,u.width/2,{label:"Body_enemy",render:{sprite:u}},0),f=SpriteUtil.createText("🐙",50,16711680),m=Matter.Bodies.circle(SpriteUtil.stageWidth-100,400,f.width/2,{label:"Body_enemy",render:{sprite:f}},0);Matter.World.add(e,[g,m]),this.enemies.push(g),this.enemies.push(m);var v=SpriteUtil.createText("👦",60);this.player=Matter.Bodies.circle(50,1250,v.width/2,{stiffness:1,collisionFilter:{category:this.playerCategory},render:{sprite:v}},0);var y=SpriteUtil.createText("👧",60);this.girlbdy=Matter.Bodies.circle(SpriteUtil.stageCenterX,y.height/2+10,y.width/2,{stiffness:1,collisionFilter:{category:this.categories[0],mask:this.playerCategory|this.categories[0]},render:{sprite:y}},0),Matter.World.add(e,[this.player,this.girlbdy]),Matter.Events.on(this.engine,"beforeUpdate",this.beforeUpdateHandle.bind(this)),Matter.Events.on(this.engine,"collisionStart",this.collisionHandle.bind(this)),v.touchEnabled=!0,v.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(e){t.isTouching=!0},this),v.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(e){t.isTouching&&Matter.Body.setPosition(t.player,{x:e.stageX,y:e.stageY})},this),v.addEventListener(egret.TouchEvent.TOUCH_END,function(e){t.isTouching=!1},this)},e.prototype.beforeUpdateHandle=function(t){this.isRunning&&(this.enemies[10].position.x>SpriteUtil.stageWidth&&(this.speedDir=-1),this.enemies[10].position.x<0&&(this.speedDir=1),Matter.Body.setVelocity(this.enemies[10],{x:5*this.speedDir,y:0}),Matter.Body.setVelocity(this.enemies[11],{x:5*-this.speedDir,y:0}),Matter.Body.rotate(this.enemies[0][0],.05,null),Matter.Body.rotate(this.enemies[1][0],-.05,null),Matter.Body.rotate(this.enemies[2][0],-.05,null),Matter.Body.rotate(this.enemies[3][0],.05,null),Matter.Body.rotate(this.enemies[4][0],-this.angleSpeed2,null),Matter.Body.rotate(this.enemies[5][0],this.angleSpeed2,null),Matter.Body.rotate(this.enemies[6][0],-this.angleSpeed3,null),Matter.Body.rotate(this.enemies[7][0],this.angleSpeed4,null),Matter.Body.rotate(this.enemies[8][0],-this.angleSpeed4,null),Matter.Body.rotate(this.enemies[9][0],this.angleSpeed4,null))},e.prototype.collisionHandle=function(t){for(var e=t.pairs,i=0,r=e;i<r.length;i++){var n=r[i];(n.bodyA==this.player||n.bodyB==this.player)&&("Body_enemy"==n.bodyA.label||"Body_enemy"==n.bodyB.label?(this.isRunning=!1,this.timeItem.stop(),this.player.render.sprite.touchEnabled=!1,Matter.Runner.stop(this.runner),EgretRender.stop(),Matter.Engine.clear(this.engine),Matter.Sleeping.afterCollisions(e,.01),Matter.Events.off(this.engine,"beforeUpdate",this.beforeUpdateHandle),Matter.Events.off(this.engine,"collisionStart",this.collisionHandle),EffectUtil.showResultEffect()):(n.bodyA==this.girlbdy||n.bodyB==this.girlbdy)&&(this.isRunning=!1,this.player.render.sprite.touchEnabled=!1,Matter.Runner.stop(this.runner),EgretRender.stop(),Matter.Engine.clear(this.engine),Matter.Sleeping.afterCollisions(e,.01),Matter.Events.off(this.engine,"collisionStart",this.collisionHandle),this.timeItem.leftTime>=30?EffectUtil.showResultEffect(EffectUtil.PERFECT):this.timeItem.leftTime>=15?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),this.timeItem.stop()))}},e.prototype.createEnemy=function(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r=7);for(var n=10,s=Matter.Composites.stack(t,e,r,1,0,0,function(t,e){return Matter.Bodies.circle(t,e,n,{label:"Body_enemy"},0)}),o=new egret.Sprite,a=0;r>a;a++){var h=SpriteUtil.createText("✴",2*n,16711680,!1);h.x=a*n*2,o.addChild(h)}o.anchorOffsetX=o.width/2-n-n/2;var l=Matter.Body.create({parts:s.bodies,render:{sprite:o},collisionFilter:{category:i,mask:this.playerCategory|i}}),c=Matter.Constraint.create({pointB:{x:l.position.x,y:l.position.y},bodyA:l,stiffness:1,length:0});return[l,c]},e.prototype.enter=function(){t.prototype.enter.call(this),this.timeItem.start()},e.prototype.exit=function(){for(Matter.World.remove(this.engine.world,this.engine.world.bodies,0),Matter.World.remove(this.engine.world,this.engine.world.constraints,0);this.numChildren>1;){var e=this.getChildAt(this.numChildren-1);this.removeChild(e)}t.prototype.exit.call(this)},e}(BaseScene);__reflect(Scene_003.prototype,"Scene_003");var Scene_004=function(t){function e(){var e=t.call(this)||this;return e.rotateAngle=0,e.targetIndex=0,e.exchangeTimes=0,e.isGameStart=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.dataVo.time=15,this.giftBoxArr=[],this.giftGroup=new egret.Sprite,this.giftGroup.x=200,this.giftGroup.y=300,this.addChild(this.giftGroup);for(var t=0;16>t;t++){var e=SpriteUtil.createText("🎁",100);e.x=t%4*110,e.y=110*Math.floor(t/4),e.name="giftBag_"+t,this.giftGroup.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.giftTap,this),this.giftBoxArr.push(e)}this.rotatePoint=new egret.Point(SpriteUtil.stageCenterX,450),this.startPoint=new egret.Point(SpriteUtil.stageCenterX,150),this.giftDisplay=SpriteUtil.createText("🌹",60),this.giftDisplay.x=SpriteUtil.stageCenterX,this.giftDisplay.y=50,this.addChild(this.giftDisplay),this.timeItem=new TimeItem(this.dataVo.time),this.addChild(this.timeItem),this.playDrop()},e.prototype.playDrop=function(){var t=this;egret.Tween.get(this.giftDisplay).to({x:this.giftDisplay.x,y:this.startPoint.y},500).call(function(){egret.startTick(t.loop,t)}).wait(500)},e.prototype.loop=function(t){var e=this;this.rotateAngle+=.1;var i=this.startPoint.x-this.rotatePoint.x,r=this.startPoint.y-this.rotatePoint.y;if(this.giftDisplay.x=i*Math.cos(this.rotateAngle)-r*Math.sin(this.rotateAngle)+this.rotatePoint.x,this.giftDisplay.y=r*Math.cos(this.rotateAngle)-i*Math.sin(this.rotateAngle)+this.rotatePoint.y,this.rotateAngle>2*Math.PI+2*Math.PI*Math.random()){egret.stopTick(this.loop,this);var n=this.giftGroup.localToGlobal(this.giftBoxArr[this.targetIndex].x,this.giftBoxArr[this.targetIndex].y);egret.Tween.get(this.giftDisplay).to({x:n.x,y:n.y},500,egret.Ease.cubicIn).to({alpha:0},1e3).call(function(){egret.Tween.removeTweens(e.giftDisplay),e.giftDisplay.visible=!1,e.randomBox()})}return!1},e.prototype.randomBox=function(){var t=this,e=Math.floor(this.giftBoxArr.length*Math.random()),i=Math.floor(this.giftBoxArr.length*Math.random());if(console.log(e+","+i),e==i)return void this.randomBox();if(this.exchangeTimes++,this.exchangeTimes>=50)return this.isGameStart=!0,void this.timeItem.start();var r=this.giftBoxArr[e],n=this.giftBoxArr[i],s=new egret.Point(r.x,r.y),o=new egret.Point(n.x,n.y);egret.Tween.get(r).to({x:o.x,y:o.y},120),egret.Tween.get(n).to({x:s.x,y:s.y},120).call(function(){var e=egret.setTimeout(function(){egret.clearTimeout(e),t.randomBox()},t,50)})},e.prototype.giftTap=function(t){if(this.isGameStart){var e=t.target.name;if(!(e.search("giftBag")<0)){var i=t.target.name.split("_")[1];this.timeItem.stop(),i==this.targetIndex?(this.timeItem.leftTime>=10?EffectUtil.showResultEffect(EffectUtil.PERFECT):this.timeItem.leftTime>=5?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),this.timeItem.stop()):EffectUtil.showResultEffect()}}},e.prototype.enter=function(){t.prototype.enter.call(this),this.targetIndex=Math.floor(this.giftBoxArr.length*Math.random()),console.log("targetIndex:"+this.targetIndex),this.playDrop()},e.prototype.exit=function(){egret.Tween.removeAllTweens(),t.prototype.exit.call(this)},e}(BaseScene);__reflect(Scene_004.prototype,"Scene_004");var Scene_005=function(t){function e(){var e=t.call(this)||this;return e.itemCategory=2,e.playerCategory=256,e.isTouching=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this;this.engine=Matter.Engine.create({enableSleeping:!1},null),this.runner=Matter.Runner.create(null),this.render=EgretRender.create({engine:this.engine,container:this,options:{width:SpriteUtil.stageWidth,height:SpriteUtil.stageHeight,wireframes:!0}}),Matter.Runner.run(this.runner,this.engine),EgretRender.run(this.render),this.engine.world.gravity.y=0,this.recycleArr=[],this.initAllItem();var e=SpriteUtil.createText("🙉",100);this.player=Matter.Bodies.circle(100,1230,e.height/2,{isStatic:!0,collisionFilter:{category:this.playerCategory},render:{sprite:e}},0),Matter.World.add(this.engine.world,this.player),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.isTouching=!0},this),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(e){t.isTouching&&Matter.Body.setPosition(t.player,{x:e.stageX,y:1230})},this),e.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.isTouching=!1},this),Matter.Events.on(this.engine,"beforeUpdate",this.beforeUpdate.bind(this)),Matter.Events.on(this.engine,"collisionStart",this.collisionStart.bind(this));var i=egret.setInterval(function(){t.playAttack()||egret.clearInterval(i)},this,500)},e.prototype.initAllItem=function(){this.recycleArr=[],this.fruitArr=[];for(var t=["🍏","🍐","🍑","🍒","🍓","🍅","🍇","🍈","🍉","🍊","🍋","🍌","🍍"],e=["💩","🍖","🍗","🍬","🍔","🍕","🍩","🍡","⚽","🍭","🍟","💣","🔋"],i=t.length,r=e.length,n=0,s=0;80>s;s++){var o=50+s%10*70,a=25+70*Math.floor(s/10),h=void 0;Math.random()>.5?(n=Math.floor(i*Math.random()),h=this.createItem(t[n],"fruit",o,a)):(n=Math.floor(r*Math.random()),h=this.createItem(e[n],"enemy",o,a)),this.fruitArr.push(h)}Matter.World.add(this.engine.world,this.fruitArr)},e.prototype.beforeUpdate=function(){this.recycleArr&&0!=this.recycleArr.length&&this.removeBody()},e.prototype.collisionStart=function(t){for(var e=t.pairs,i=0,r=e;i<r.length;i++){var n=r[i];n.bodyA==this.player?"fruit"==n.bodyB.name?this.removeBody(n.bodyB):"enemy"==n.bodyB.name&&(this.destroy(),EffectUtil.showResultEffect()):n.bodyB==this.player&&("fruit"==n.bodyA.name?this.removeBody(n.bodyA):"enemy"==n.bodyA.name&&(this.destroy(),EffectUtil.showResultEffect()))}},e.prototype.removeBody=function(t){if(void 0===t&&(t=null),t){var e=this.recycleArr.indexOf(t);e>=0&&(this.recycleArr.splice(e,1),Matter.World.remove(this.engine.world,t,0),this.removeChild(t.render.sprite))}else for(var i=this.recycleArr.length,r=i-1;r>=0;r--){var n=this.recycleArr[r];
n.position.y>SpriteUtil.stageHeight&&(Matter.World.remove(this.engine.world,n,0),this.recycleArr.splice(r,1),this.removeChild(n.render.sprite))}},e.prototype.playAttack=function(){var t=this.fruitArr.length;if(0>=t)return 0==this.recycleArr.length?(this.destroy(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_NEXT)),!1):!0;var e=Math.floor(t*Math.random()),i=this.fruitArr.splice(e,1)[0];this.recycleArr.push(i);var r=this.player.position.x-i.position.x,n=this.player.position.y-i.position.y,s=n/r;s>5&&(s=5),-5>s&&(s=-5);var o=r/Math.abs(r),a=o*s;return Matter.Body.setVelocity(i,{x:3*o,y:3*a}),Matter.Body.setAngularVelocity(i,.01*o),!0},e.prototype.createItem=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=SpriteUtil.createText(t,50),s=Matter.Bodies.circle(i,r,n.width/2,{name:e,frictionAir:0,collisionFilter:{category:this.itemCategory,mask:1|this.playerCategory},render:{sprite:n}},0);return s},e.prototype.destroy=function(){Matter.Runner.stop(this.runner),EgretRender.stop(),Matter.Engine.clear(this.engine),Matter.Events.off(this.engine,"beforeUpdate",this.beforeUpdate),Matter.Events.off(this.engine,"collisionStart",this.collisionStart),Matter.World.remove(this.engine.world,this.engine.world.bodies,0),Matter.World.remove(this.engine.world,this.engine.world.constraints,0)},e.prototype.exit=function(){for(this.destroy();this.numChildren>1;){var e=this.getChildAt(this.numChildren-1);this.removeChild(e)}t.prototype.exit.call(this)},e}(BaseScene);__reflect(Scene_005.prototype,"Scene_005");var Scene_006=function(t){function e(){var e=t.call(this)||this;return e.selectNum=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.dataVo.time=60,this.timeItem=new TimeItem(30),this.addChild(this.timeItem);var t=["🔨","💃","💏","👪","💉","🚩","🍼","👆","👇"];this.tarSprite1=this.createPic(t),this.tarSprite1.x=SpriteUtil.stageCenterX-this.tarSprite1.width/2,this.tarSprite1.y=100,this.tarSprite1.name="target_1",this.addChild(this.tarSprite1);var e=["🍦","🌀","✊","📏","✋","☝","☀","🌿","❄"];this.tarSprite2=this.createPic(e),this.tarSprite2.x=SpriteUtil.stageCenterX-this.tarSprite2.width/2,this.tarSprite2.y=this.tarSprite1.y+this.tarSprite1.height+100,this.addChild(this.tarSprite2),this.tarSprite2.name="target_2",this.tarPoints=[],this.tarPoints.push(new egret.Point(80,SpriteUtil.stageCenterY+200)),this.tarPoints.push(new egret.Point(400,SpriteUtil.stageCenterY+200)),this.picSprs=[],this.createRandomPic(t,2,3),this.createRandomPic(t,1,4),this.createRandomPic(t,5,6),this.createRandomPic(t,0,8),this.createRandomPic(t,6,3),this.createRandomPic(t,1,2),this.createRandomPic(t,0,4),this.createRandomPic(e,2,3),this.createRandomPic(e,1,4),this.createRandomPic(e,5,6),this.createRandomPic(e,0,8),this.createRandomPic(e,6,3),this.createRandomPic(e,1,2),this.createRandomPic(e,0,5)},e.prototype.startGame=function(){this.picSprs.push(this.tarSprite1),this.picSprs.push(this.tarSprite2),this.tarSprite1.touchEnabled=!0,this.tarSprite2.touchEnabled=!0,this.tarSprite1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectClk,this),this.tarSprite2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectClk,this),this.picSprs.sort(function(t,e){return Math.random()>.5?1:-1});for(var t=0;t<this.picSprs.length;t++){var e=10+t%4*180,i=100+175*Math.floor(t/4);this.picSprs[t].x=e,this.picSprs[t].y=i,this.addChild(this.picSprs[t]),this.picSprs[t].scaleX=.45,this.picSprs[t].scaleY=.45}},e.prototype.createRandomPic=function(t,e,i){void 0===t&&(t=[]),void 0===e&&(e=0),void 0===i&&(i=0);var r=t[e];t[e]=t[i],t[i]=r;var n=this.createPic(t);n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectClk,this),n.name="mistake",n.touchEnabled=!0,this.picSprs.push(n)},e.prototype.selectClk=function(t){var e=this;console.log(t.target.name);var i=t.target.name;if("mistake"==i)return this.timeItem.stop(),void EffectUtil.showResultEffect();if(i&&!(i.search("target_")<0)){var r=parseInt(i.split("_")[1]),n=t.target;n.touchEnabled=!1,egret.Tween.get(n).to({x:this.tarPoints[r-1].x,y:this.tarPoints[r-1].y,scaleX:.7,scaleY:.7},800).call(function(){e.selectNum++,e.selectNum>=2&&(e.timeItem.leftTime>=30?EffectUtil.showResultEffect(EffectUtil.PERFECT):e.timeItem.leftTime>=15?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),e.timeItem.stop())})}},e.prototype.createPic=function(t){for(var e=new egret.Sprite,i=0;i<t.length;i++){var r=SpriteUtil.createText(t[i],100);r.x=r.width/2+i%3*120,r.y=r.height/2+120*Math.floor(i/3),r.stroke=.5,r.strokeColor=65280,e.addChild(r)}return e.width=e.height,e.graphics.beginFill(9883085),e.graphics.drawRect(0,0,e.width,e.height),e.graphics.endFill(),e},e.prototype.enter=function(){t.prototype.enter.call(this),this.timeItem.start(this.loop,this)},e.prototype.exit=function(){t.prototype.exit.call(this),this.timeItem.stop();for(var e=0,i=this.picSprs;e<i.length;e++){var r=i[e];r.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectClk,this)}},e.prototype.loop=function(t){0>=t&&(this.startGame(),this.timeItem.stop(),this.timeItem.restart(this.dataVo.time))},e}(BaseScene);__reflect(Scene_006.prototype,"Scene_006");var Scene_007=function(t){function e(){var e=t.call(this)||this;return e.needNums=0,e.score=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.dataVo.sData=["🐁","🐖","🐄","🐆","🐕","🐒","🐏","🐢","🐓","🐇","🐦","🐘"],this.dataVo.tData=20,this.dataVo.time=30,this.timeItem=new TimeItem(this.dataVo.time),this.addChild(this.timeItem),this.scoreItem=new ScoreItem,this.scoreItem.x=50,this.scoreItem.setSTScore(this.score,this.dataVo.tData),this.addChild(this.scoreItem),this.timeItem.x=SpriteUtil.stageWidth-300,this.needNums=1,this.pointsArr=[];for(var t=0;50>t;t++){var e=new egret.Point;e.x=104+104*(t%5),e.y=108+108*Math.floor(t/5),this.pointsArr.push(e)}},e.prototype.loop=function(t){return 0>=t?void this.timeItem.stop():void(8>=t?this.needNums=15:10>=t?this.needNums=12:20>=t?this.needNums=8:25>=t?this.needNums=4:30>=t&&(this.needNums=1))},e.prototype.showSprites=function(t){var e=this,i=0,r=this.getRandomPoints(t),n=egret.setInterval(function(){var s=0;i>0&&(s=Math.floor(e.dataVo.sData.length*Math.random()));var o=e.getPools(s);if(o.x=e.pointsArr[r[i]].x,o.y=e.pointsArr[r[i]].y,i++,i>=t){egret.clearInterval(n);var a=egret.setTimeout(function(){egret.clearTimeout(a);for(var t=0,i=e.pools;t<i.length;t++){var r=i[t];r.visible=!1,r.scaleX=1,r.scaleY=1,r.text=""}e.showSprites(e.needNums)},e,1e3)}},this,200)},e.prototype.getRandomPoints=function(t){for(var e=[];e.length<t;){var i=Math.floor(50*Math.random());e.indexOf(i)<0&&e.push(i)}return e},e.prototype.getPools=function(t){var e=this;void 0===t&&(t=0);var i,r=this.dataVo.sData[t];if(this.pools)for(var n=0,s=this.pools;n<s.length;n++){var o=s[n];if(!o.visible&&""==o.text){i=o;break}}else this.pools=[];return i?(i.text=r,i.visible=!0):(i=SpriteUtil.createText(r,100),this.pools.push(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){var i=t.target;"🐁"==i.name?(i.visible=!1,i.scaleX=1,i.scaleY=1,i.text="",e.score++,e.scoreItem.setSTScore(e.score),e.scoreItem.isCanPass()&&(e.timeItem.leftTime>=10?EffectUtil.showResultEffect(EffectUtil.PERFECT):e.timeItem.leftTime>=5?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),e.timeItem.stop())):(e.timeItem.stop(),EffectUtil.showResultEffect())},this)),i.touchEnabled=!0,i.name=r,this.addChild(i),i},e.prototype.enter=function(){t.prototype.enter.call(this),this.timeItem.start(this.loop,this),this.showSprites(this.needNums)},e.prototype.exit=function(){t.prototype.exit.call(this),this.timeItem.stop()},e}(BaseScene);__reflect(Scene_007.prototype,"Scene_007");var Scene_008=function(t){function e(){var e=t.call(this)||this;return e.animalsArr=CommonUtil.allAnimals.concat(),e.emojiArr=["😭","😄","😎","😡","😍","😜","😴"],e.needCount=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.dataVo.time=30,this.dataVo.tData="😄",this.passArr=[],this.animalsArr.sort(function(t,e){return Math.random()>.5?1:Math.random()<.5?-1:0}),this.animalSpr=SpriteUtil.createText(this.animalsArr[this.needCount],200),this.animalSpr.y=SpriteUtil.stageCenterY-100,this.addChild(this.animalSpr),this.emojiSpr=SpriteUtil.createText("😭",280),this.emojiSpr.visible=!1,this.addChild(this.emojiSpr),EffectUtil.breath(this.emojiSpr),this.playShow()},e.prototype.playShow=function(){var t=this,e=this.animalsArr[this.needCount],i=this.emojiArr[Math.floor(this.emojiArr.length*Math.random())];this.passArr.push({animal:e,emoji:i}),this.animalSpr.text=e;var r=this.getRandomPos();this.animalSpr.x=r[0],this.animalSpr.y=r[1],this.animalSpr.visible=!0,egret.Tween.get(this.animalSpr).to({x:SpriteUtil.stageCenterX,y:SpriteUtil.stageCenterY},500).call(function(){var e=egret.setTimeout(function(){egret.clearTimeout(e),egret.Tween.removeTweens(t.animalSpr),t.emojiSpr.x=t.animalSpr.x,t.emojiSpr.y=t.animalSpr.y,t.emojiSpr.text=i,t.emojiSpr.visible=!0;var r=egret.setTimeout(function(){return egret.clearTimeout(r),t.emojiSpr.visible=!1,t.animalSpr.visible=!1,t.needCount++,t.needCount>=10?void t.startLook():void t.playShow()},t,1500)},t,1e3)})},e.prototype.getRandomPos=function(){var t=[[0,0],[SpriteUtil.stageCenterX,0],[SpriteUtil.stageWidth,0],[0,SpriteUtil.stageCenterY],[SpriteUtil.stageWidth,SpriteUtil.stageCenterY],[0,SpriteUtil.stageHeight],[SpriteUtil.stageCenterX,SpriteUtil.stageHeight],[SpriteUtil.stageWidth,SpriteUtil.stageHeight]],e=Math.floor(t.length*Math.random());return t[e]},e.prototype.startLook=function(){egret.Tween.removeAllTweens(),this.removeChild(this.animalSpr),this.removeChild(this.emojiSpr),this.dataVo.tData=this.passArr[Math.floor(this.passArr.length*Math.random())].emoji,console.log(this.passArr);var t="谜题:找出所有发出表情"+this.dataVo.tData+"的动物",e=SpriteUtil.createText(t,36,16316671);e.x=SpriteUtil.stageCenterX,e.y=100,this.addChild(e);for(var i=0;i<this.animalsArr.length;i++){var r=SpriteUtil.createText(this.animalsArr[i],100);r.x=100+i%5*125,r.y=200+125*Math.floor(i/5),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectClk,this),this.addChild(r)}this.timeItem=new TimeItem(this.dataVo.time),this.addChild(this.timeItem),this.timeItem.start()},e.prototype.selectClk=function(t){for(var e=t.target,i=!1,r=this.passArr.length,n=r-1;n>=0;n--){var s=this.passArr[n];s.emoji==this.dataVo.tData&&s.animal==e.text&&(e.alpha=.5,e.touchEnabled=!1,i=!0,this.passArr.splice(n,1))}i?this.isCanPass()&&(this.timeItem.leftTime>=25?EffectUtil.showResultEffect(EffectUtil.PERFECT):this.timeItem.leftTime>=15?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),this.timeItem.stop()):EffectUtil.showResultEffect()},e.prototype.isCanPass=function(){for(var t=0,e=this.passArr;t<e.length;t++){var i=e[t];if(i.emoji==this.dataVo.tData)return!1}return!0},e.prototype.exit=function(){t.prototype.exit.call(this),this.timeItem.stop(),egret.Tween.removeAllTweens()},e}(BaseScene);__reflect(Scene_008.prototype,"Scene_008");var Scene_009=function(t){function e(){var e=t.call(this)||this;return e.isTouching=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.timeItem=new TimeItem(60),this.addChild(this.timeItem),this.engine=Matter.Engine.create({enableSleeping:!1},null),this.runner=Matter.Runner.create(null),this.render=EgretRender.create({engine:this.engine,container:this,options:{width:SpriteUtil.stageWidth,height:SpriteUtil.stageHeight,wireframes:!0}}),Matter.Runner.run(this.runner,this.engine),EgretRender.run(this.render),this.engine.world.gravity.y=1,this.createWall(),this.createBall();var t=SpriteUtil.createRect(200,10,16711680),e=Matter.Bodies.rectangle(SpriteUtil.stageCenterX,300,t.width,t.height,{frictionAir:.01,friction:0,render:{sprite:t}}),i=Matter.Constraint.create({bodyA:e,pointB:{x:e.position.x,y:e.position.y},stiffness:1});Matter.World.add(this.engine.world,[e,i]),this.createVc(60,400,65535),this.createVc(SpriteUtil.stageWidth-100,400,65535);var r=SpriteUtil.createRect(200,10,65280),n=Matter.Bodies.rectangle(80,120,200,10,{isStatic:!0,angle:Math.PI/4,render:{sprite:r}}),s=SpriteUtil.createRect(200,10,65280),o=Matter.Bodies.rectangle(SpriteUtil.stageWidth-80,120,200,10,{isStatic:!0,angle:-Math.PI/4,render:{sprite:s}});Matter.World.add(this.engine.world,[n,o]),Matter.Events.on(this.engine,"collisionActive",this.collision.bind(this)),this.createBoard()},e.prototype.collision=function(t){for(var e=t.pairs,i=!1,r=!1,n=0,s=0,o=e;s<o.length;s++){var a=o[s],h="basketBoard"==a.bodyA.label?a.bodyA:null,l=a.bodyB;null==h&&(h="basketBoard"==a.bodyB.label?a.bodyB:null,l=a.bodyA),null!=h&&(1==l.mass?r=!0:3==l.mass?i=!0:2==l.mass&&n++)}r&&i?(Matter.Events.off(this.engine,"collisionActive",this.collision),Matter.Runner.stop(this.runner),EgretRender.stop(),this.timeItem.leftTime>=30?EffectUtil.showResultEffect(EffectUtil.PERFECT):this.timeItem.leftTime>=15?EffectUtil.showResultEffect(EffectUtil.EXCELLENT):EffectUtil.showResultEffect(EffectUtil.GOOD),this.timeItem.stop()):(r||i)&&1==n?(Matter.Events.off(this.engine,"collisionActive",this.collision),Matter.Runner.stop(this.runner),this.timeItem.stop(),EgretRender.stop(),EffectUtil.showResultEffect()):2==n&&(Matter.Events.off(this.engine,"collisionActive",this.collision),Matter.Runner.stop(this.runner),EgretRender.stop(),this.timeItem.stop(),EffectUtil.showResultEffect())},e.prototype.touchBegin=function(t){var e=t.target.name;if(e&&-1!=e.search("ball_")){var i=e.split("_")[1];this.currDragBall=this.ballsArr[i],this.isTouching=!0}},e.prototype.touchMove=function(t){this.isTouching&&this.currDragBall&&(Matter.Body.setVelocity(this.currDragBall,{x:0,y:-1}),Matter.Sleeping.set(this.currDragBall,!1),Matter.Body.setPosition(this.currDragBall,{x:t.stageX,y:t.stageY}))},e.prototype.touchEnd=function(){this.isTouching=!1,Matter.Body.setVelocity(this.currDragBall,{x:0,y:0}),this.currDragBall=null},e.prototype.createBall=function(){var t=this;this.ballsArr=[];var e=0,i=10,r=CommonUtil.getRandomNumFromARange(2,0,i);r.sort(function(t,e){return t-e}),console.log(r);var n=egret.setInterval(function(){var s=SpriteUtil.createText("🏀",50),o=e%2==0?20:SpriteUtil.stageWidth-20,a=r[0]==e?1:2;1!=a&&(a=r[1]==e?3:2),s.name="ball_"+e;var h=Matter.Bodies.circle(o,0,s.height/2,{restitution:.5,mass:a,label:"ball",render:{sprite:s}},0);Matter.World.add(t.engine.world,h),t.ballsArr.push(h),s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchBegin,t),s.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.touchMove,t),s.addEventListener(egret.TouchEvent.TOUCH_END,t.touchEnd,t),s.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.touchEnd,t),s.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.touchEnd,t),e++,e>=i&&egret.clearInterval(n)},this,500);Matter.World.add(this.engine.world,this.ballsArr)},e.prototype.createVc=function(t,e,i){void 0===i&&(i=65280);var r=SpriteUtil.createRect(50,10,i),n=Matter.Bodies.rectangle(t,e,50,10,{isStatic:!0,angle:Math.PI/3,render:{sprite:r}}),s=SpriteUtil.createRect(50,10,i),o=Matter.Bodies.rectangle(t+40,e,50,10,{isStatic:!0,angle:-Math.PI/3,render:{sprite:s}}),a=SpriteUtil.createRect(30,10,i),h=Matter.Bodies.rectangle(t+20,e,30,10,{isStatic:!0,label:"basketBoard",render:{sprite:a}}),l=new egret.TextField;l.text="实验结果",l.x=t+20,l.y=e-60,l.textAlign="center",l.textColor=65280,l.size=22,l.width=100,l.anchorOffsetX=50,this.addChild(l),Matter.World.add(this.engine.world,[n,o,h])},e.prototype.createWall=function(){var t=Matter.Bodies.rectangle(-5,SpriteUtil.stageCenterY,10,SpriteUtil.stageHeight,{isStatic:!0}),e=Matter.Bodies.rectangle(SpriteUtil.stageWidth+5,SpriteUtil.stageCenterY,10,SpriteUtil.stageHeight,{isStatic:!0}),i=Matter.Bodies.rectangle(SpriteUtil.stageCenterX,-5,SpriteUtil.stageWidth,10,{isStatic:!0}),r=Matter.Bodies.rectangle(SpriteUtil.stageCenterX,SpriteUtil.stageHeight+5,SpriteUtil.stageWidth,10,{isStatic:!0});Matter.World.add(this.engine.world,[t,e,i,r])},e.prototype.createBoard=function(){for(var t=[],e=0;6>e;e++){var i=SpriteUtil.createRect(10,100,Math.ceil(16776960*Math.random())+32),r=Matter.Bodies.rectangle(10+100*(e+1),SpriteUtil.stageCenterY+100,10,100,{isStatic:!0,render:{sprite:i}});t.push(r)}Matter.World.add(this.engine.world,t)},e.prototype.enter=function(){t.prototype.enter.call(this),this.timeItem.start()},e.prototype.exit=function(){t.prototype.exit.call(this),this.timeItem.stop();for(var e=0,i=this.engine.world.bodies;e<i.length;e++){var r=i[e];"ball"==r.label&&(r.render.sprite.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),r.render.sprite.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),r.render.sprite.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),r.render.sprite.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.touchEnd,this),r.render.sprite.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this))}Matter.World.remove(this.engine.world,this.engine.world.bodies,0),Matter.World.remove(this.engine.world,this.engine.world.constraints,0)},e}(BaseScene);__reflect(Scene_009.prototype,"Scene_009");var Scene_010=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e}(BaseScene);__reflect(Scene_010.prototype,"Scene_010");var CommonUtil=function(){function t(){}return t.getMSTimeBySeconds=function(t){void 0===t&&(t=0);var e=Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60),i=10>t%60?"0"+t%60:t%60;return e+":"+i},t.getRandomNumFromARange=function(t,e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=!1),!t||e>=i)return null;for(var n=i-e,s=[],o=0;n>o;o++)s.push(e+o);if(t>=n)return s;for(var a=[],o=0;t>o;o++){var h=Math.floor(s.length*Math.random());a.push(s[h]),s.splice(h,1)}return a},t.allEmoji=["😑","😶","😏","😣","😥","😮","😯","😪","😫","😴","😌","😛","😜","😝","😒","😓","😔","😕","😲","😷","😖","😞","😟","😤","😢","😭","😦","😧","😨","😬","😰","😱","😳","😵","😡","😠"],t.allAnimals=["🐒","🐕","🐈","🐅","🐆","🐎","🐂","🐄","🐖","🐏","🐪","🐘","🐀","🐇","🐓","🐦","🐧","🐢","🐍","🐉","🐳","🐬","🐟","🐤","🐊"],t}();__reflect(CommonUtil.prototype,"CommonUtil");var EffectUtil=function(){function t(){}return t.showResultEffect=function(t){var e=this;void 0===t&&(t=0);var i="oh shit!";1==t?i="good":2==t?i="excellent":3==t&&(i="perfect");var r=SpriteUtil.createText(i,100,16766720);r.stroke=5,r.strokeColor=16711680,r.bold=!0,r.x=SpriteUtil.stageCenterX,r.y=SpriteUtil.stageCenterY-200,r.scaleX=5,r.scaleY=5,r.alpha=.1,Game.instance().addMiddle(r),egret.Tween.get(r).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.cubicIn).call(function(){var i=egret.setTimeout(function(){egret.clearTimeout(i),r.parent&&r.parent.removeChild(r),0==t?Game.instance().gameScene.gotoOver():EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_NEXT))},e,500)})},t.breath=function(t,e){void 0===e&&(e=.8),egret.Tween.get(t,{loop:!0}).to({scaleX:e,scaleY:e},500).to({scaleX:1,scaleY:1},500)},t.GOOD=1,t.EXCELLENT=2,t.PERFECT=3,t}();__reflect(EffectUtil.prototype,"EffectUtil");var SpriteUtil=function(){function t(){}return t.createCircle=function(t,e){void 0===e&&(e=65280);var i=new egret.Shape;return i.graphics.beginFill(e),i.graphics.drawCircle(0,0,t),i.graphics.endFill(),i},t.createRect=function(t,e,i){void 0===i&&(i=65280);var r=new egret.Shape;return r.graphics.beginFill(i),r.graphics.drawRect(0,0,t,e),r.graphics.endFill(),r.anchorOffsetX=t/2,r.anchorOffsetY=e/2,r},t.createPolygon=function(t,e){if(void 0===e&&(e=65280),t&&t.length){var i=new egret.Shape,r=t.length;i.graphics.beginFill(e),i.graphics.lineStyle(1,e),i.graphics.moveTo(t[0],t[1]);for(var n=0;r>n;n+=2)i.graphics.lineTo(t[n],t[n+1]),i.graphics.moveTo(t[n],t[n+1]);return i.graphics.lineTo(t[0],t[1]),i.graphics.endFill(),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i}},t.createText=function(t,e,i,r){void 0===e&&(e=40),void 0===i&&(i=16711680),void 0===r&&(r=!1);var n=new egret.TextField;return n.size=e,n.text=t,n.textColor=i,n.background=r,n.backgroundColor=16776960,n.textAlign="center",n.verticalAlign="middle",n.bold=!0,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n},t.createImage=function(t){var e=new egret.Bitmap(RES.getRes(t));return e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e},t.createButton=function(t,e,i){void 0===e&&(e=200),void 0===i&&(i=80);var r=new egret.Sprite,n=new egret.Shape;n.graphics.beginFill(65280),n.graphics.drawRect(0,0,e,i),n.graphics.endFill();var s=new egret.TextField;return s.text=t,s.size=40,s.textAlign="center",s.width=e,s.y=20,s.stroke=1,s.strokeColor=0,s.bold=!0,s.touchEnabled=!1,r.addChild(n),r.addChild(s),r.touchEnabled=!0,r},t.stageWidth=0,t.stageHeight=0,t.stageCenterX=0,t.stageCenterY=0,t}();__reflect(SpriteUtil.prototype,"SpriteUtil");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var GuideView=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this,e=new egret.Shape;e.graphics.beginFill(0),e.graphics.drawRect(0,0,SpriteUtil.stageWidth,SpriteUtil.stageHeight),e.graphics.endFill(),this.addChild(e),this.tipsTxt=new egret.TextField,this.tipsTxt.name="",this.tipsTxt.textAlign="center",this.tipsTxt.size=40,this.tipsTxt.textColor=65280,this.tipsTxt.stroke=1,this.tipsTxt.strokeColor=255,this.tipsTxt.bold=!0,this.tipsTxt.lineSpacing=20,this.tipsTxt.width=SpriteUtil.stageWidth-200,this.tipsTxt.x=(SpriteUtil.stageWidth-this.tipsTxt.width)/2,this.tipsTxt.y=SpriteUtil.stageHeight/2-200,this.addChild(this.tipsTxt);var i=SpriteUtil.createButton("我知道了");i.x=SpriteUtil.stageCenterX-i.width/2,i.y=SpriteUtil.stageCenterY+100,this.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.close(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.START_GAME))},this)},e.prototype.show=function(e){void 0===e&&(e=""),this.tipsTxt.text=e,t.prototype.open.call(this)},e}(BaseView);__reflect(GuideView.prototype,"GuideView");var DataVO=function(){function t(){}return t}();__reflect(DataVO.prototype,"DataVO");